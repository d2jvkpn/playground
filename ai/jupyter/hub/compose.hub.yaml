services:
  jupyterhub:
    image: jupyterhub/jupyterhub:5
    container_name: jupyterhub
    restart: always
    #networks: [jupyterhub]
    network_mode: bridge
    ports: ["8000:8000"]
    volumes:
    # The JupyterHub configuration file
    - "./configs/jupyterhub_config.py:/srv/jupyterhub/jupyterhub_config.py:ro"
    # Bind Docker socket on the host so we can connect to the daemon from within the container
    - "/var/run/docker.sock:/var/run/docker.sock:rw"
    # Bind Docker volume on host for JupyterHub database and cookie secrets
    - "./data/jupyterhub:/data"
    environment:
      # This username will be a JupyterHub admin
      JUPYTERHUB_ADMIN: admin
      # All containers will join this network
      DOCKER_NETWORK_NAME: jupyterhub-network
      # JupyterHub will spawn this Notebook image for users
      DOCKER_NOTEBOOK_IMAGE: quay.io/jupyter/base-notebook:latest
      # Notebook directory inside user image
      DOCKER_NOTEBOOK_DIR: /home/jovyan/work
