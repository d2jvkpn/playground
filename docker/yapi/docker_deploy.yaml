version: '3'

services:
  yapi:
    image: registry.cn-hangzhou.aliyuncs.com/anoy/yapi:latest
    container_name: yapi_web
    restart: always
    depends_on: ["mongo"]
    working_dir: /api/vendors
    networks: ["net"]
    ports: ["127.0.0.1:${HTTP_Port}:3000"]
    command: ["server/app.js"]

  mongo:
    image: mongo:4
    container_name: yapi_mongo
    restart: always
    networks: ["net"]
    volumes: ["./data/mongo:/data/db"]

networks:
  net: {name: "yapi", driver: "bridge", external: false}

# docker exec yapi_web npm run install-server
# default account: admin@admin.com
# default password: ymfe.org
