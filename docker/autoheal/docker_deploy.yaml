version: "3"

services:
  autoheal:
    restart: always
    image: willfarrell/autoheal
    container_name: autoheal
    networks: ["net"]
    environment:
    - AUTOHEAL_CONTAINER_LABEL=all
    volumes:
    - /var/run/docker.sock:/var/run/docker.sock

networks:
  net: { name: local, driver: bridge, external: true }

# docker run -d --name autoheal --restart=always -e AUTOHEAL_CONTAINER_LABEL=all -v /var/run/docker.sock:/var/run/docker.sock willfarrell/autoheal

# docker inspect --format '{{json .State.Health}}' container
